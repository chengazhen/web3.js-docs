import{_ as s,c as i,o as a,a2 as e}from"./chunks/framework.CzTYqZAs.js";const g=JSON.parse('{"title":"使用 web3.js ENS 包","description":"","frontmatter":{},"headers":[],"relativePath":"guides/ens/index.md","filePath":"guides/ens/index.md"}'),n={name:"guides/ens/index.md"},t=e(`<h1 id="使用-web3-js-ens-包" tabindex="-1">使用 web3.js ENS 包 <a class="header-anchor" href="#使用-web3-js-ens-包" aria-label="Permalink to &quot;使用 web3.js ENS 包&quot;">​</a></h1><h2 id="" tabindex="-1"><a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">​</a></h2><iframe width="100%" height="700px" src="https://stackblitz.com/edit/vitejs-vite-qmk8vz?embed=1&amp;file=main.ts&amp;showSidebar=1"></iframe><p>在本教程中，我们将探讨如何使用 web3.js ENS（以太坊名称服务）包。以太坊名称服务（ENS）是建立在以太坊区块链上的去中心化域名系统。它是一个分布式、安全的、可读性强的命名系统，旨在将以太坊地址、智能合约和各种其他服务映射到易于理解的名称。</p><h2 id="安装-web3-js" tabindex="-1">安装 web3.js <a class="header-anchor" href="#安装-web3-js" aria-label="Permalink to &quot;安装 web3.js&quot;">​</a></h2><p>首先，使用 npm 在您的项目中安装 web3.js 版本 4：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> web3</span></span></code></pre></div><h2 id="设置-web3-和-ens" tabindex="-1">设置 web3 和 ENS <a class="header-anchor" href="#设置-web3-和-ens" aria-label="Permalink to &quot;设置 web3 和 ENS&quot;">​</a></h2><p>现在，让我们在 TypeScript 文件中设置 web3 和 ENS：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Web3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;web3&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 假设你有一个提供者，将 &#39;http://localhost:8545&#39; 替换为你的 Web3 提供者</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> web3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Web3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://localhost:8545&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 初始化 ENS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ens</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> web3.ens;</span></span></code></pre></div><h2 id="解析-ens-名称" tabindex="-1">解析 ENS 名称 <a class="header-anchor" href="#解析-ens-名称" aria-label="Permalink to &quot;解析 ENS 名称&quot;">​</a></h2><p>一旦我们设置了 web3 和 ENS，我们可以解析 ENS 名称。以下是如何将 ENS 名称解析为以太坊地址的示例：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> address</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ens.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vitalik.eth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;以太坊地址:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, address);</span></span></code></pre></div><h2 id="注册-ens-名称" tabindex="-1">注册 ENS 名称 <a class="header-anchor" href="#注册-ens-名称" aria-label="Permalink to &quot;注册 ENS 名称&quot;">​</a></h2><p>要注册一个新的 ENS 名称，我们首先需要使用 web3.js 与 ENS 合约进行交互：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;example.eth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> owner</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;0xYourEthereumAddress&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 假设你已经部署了一个 ENS 合约</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ens.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOwner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name, owner);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} 已注册到 \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">owner</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="反向解析" tabindex="-1">反向解析 <a class="header-anchor" href="#反向解析" aria-label="Permalink to &quot;反向解析&quot;">​</a></h2><p>反向解析是从以太坊地址查找相应的 ENS 名称。以下是如何执行此操作的示例：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ens.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0xYourEthereumAddress&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ENS 名称:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, name);</span></span></code></pre></div><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>通过使用 web3.js ENS 包，您可以轻松地在去中心化的以太坊名称服务上解析、注册和反向解析名称。这为以太坊生态系统中的用户和开发者提供了便捷的命名服务，使得复杂的以太坊地址更易于使用和记忆。</p>`,21),h=[t];function p(l,k,d,r,E,o){return a(),i("div",null,h)}const y=s(n,[["render",p]]);export{g as __pageData,y as default};
